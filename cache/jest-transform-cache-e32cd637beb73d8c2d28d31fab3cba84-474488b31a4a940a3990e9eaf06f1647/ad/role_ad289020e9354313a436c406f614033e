7e8c335fae116f18d823d7cbc097f23b
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.queryByRole = exports.queryAllByRole = exports.getByRole = exports.getAllByRole = exports.findByRole = exports.findAllByRole = void 0;
var _domAccessibilityApi = require("dom-accessibility-api");
var _ariaQuery = require("aria-query");
var _roleHelpers = require("../role-helpers");
var _queryHelpers = require("../query-helpers");
var _helpers = require("../helpers");
var _allUtils = require("./all-utils");
function queryAllByRole(container, role, {
  exact = true,
  collapseWhitespace,
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description,
  trim,
  normalizer,
  queryFallbacks = false,
  selected,
  checked,
  pressed,
  current,
  level,
  expanded
} = {}) {
  (0, _helpers.checkContainerType)(container);
  const matcher = exact ? _allUtils.matches : _allUtils.fuzzyMatches;
  const matchNormalizer = (0, _allUtils.makeNormalizer)({
    collapseWhitespace,
    trim,
    normalizer
  });
  if (selected !== undefined) {
    var _allRoles$get;
    // guard against unknown roles
    if (((_allRoles$get = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get.props['aria-selected']) === undefined) {
      throw new Error(`"aria-selected" is not supported on role "${role}".`);
    }
  }
  if (checked !== undefined) {
    var _allRoles$get2;
    // guard against unknown roles
    if (((_allRoles$get2 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get2.props['aria-checked']) === undefined) {
      throw new Error(`"aria-checked" is not supported on role "${role}".`);
    }
  }
  if (pressed !== undefined) {
    var _allRoles$get3;
    // guard against unknown roles
    if (((_allRoles$get3 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get3.props['aria-pressed']) === undefined) {
      throw new Error(`"aria-pressed" is not supported on role "${role}".`);
    }
  }
  if (current !== undefined) {
    var _allRoles$get4;
    /* istanbul ignore next */
    // guard against unknown roles
    // All currently released ARIA versions support `aria-current` on all roles.
    // Leaving this for symetry and forward compatibility
    if (((_allRoles$get4 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get4.props['aria-current']) === undefined) {
      throw new Error(`"aria-current" is not supported on role "${role}".`);
    }
  }
  if (level !== undefined) {
    // guard against using `level` option with any role other than `heading`
    if (role !== 'heading') {
      throw new Error(`Role "${role}" cannot have "level" property.`);
    }
  }
  if (expanded !== undefined) {
    var _allRoles$get5;
    // guard against unknown roles
    if (((_allRoles$get5 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get5.props['aria-expanded']) === undefined) {
      throw new Error(`"aria-expanded" is not supported on role "${role}".`);
    }
  }
  const subtreeIsInaccessibleCache = new WeakMap();
  function cachedIsSubtreeInaccessible(element) {
    if (!subtreeIsInaccessibleCache.has(element)) {
      subtreeIsInaccessibleCache.set(element, (0, _roleHelpers.isSubtreeInaccessible)(element));
    }
    return subtreeIsInaccessibleCache.get(element);
  }
  return Array.from(container.querySelectorAll(
  // Only query elements that can be matched by the following filters
  makeRoleSelector(role, exact, normalizer ? matchNormalizer : undefined))).filter(node => {
    const isRoleSpecifiedExplicitly = node.hasAttribute('role');
    if (isRoleSpecifiedExplicitly) {
      const roleValue = node.getAttribute('role');
      if (queryFallbacks) {
        return roleValue.split(' ').filter(Boolean).some(text => matcher(text, node, role, matchNormalizer));
      }
      // if a custom normalizer is passed then let normalizer handle the role value
      if (normalizer) {
        return matcher(roleValue, node, role, matchNormalizer);
      }
      // other wise only send the first word to match
      const [firstWord] = roleValue.split(' ');
      return matcher(firstWord, node, role, matchNormalizer);
    }
    const implicitRoles = (0, _roleHelpers.getImplicitAriaRoles)(node);
    return implicitRoles.some(implicitRole => matcher(implicitRole, node, role, matchNormalizer));
  }).filter(element => {
    if (selected !== undefined) {
      return selected === (0, _roleHelpers.computeAriaSelected)(element);
    }
    if (checked !== undefined) {
      return checked === (0, _roleHelpers.computeAriaChecked)(element);
    }
    if (pressed !== undefined) {
      return pressed === (0, _roleHelpers.computeAriaPressed)(element);
    }
    if (current !== undefined) {
      return current === (0, _roleHelpers.computeAriaCurrent)(element);
    }
    if (expanded !== undefined) {
      return expanded === (0, _roleHelpers.computeAriaExpanded)(element);
    }
    if (level !== undefined) {
      return level === (0, _roleHelpers.computeHeadingLevel)(element);
    }
    // don't care if aria attributes are unspecified
    return true;
  }).filter(element => {
    if (name === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleName)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, name, text => text);
  }).filter(element => {
    if (description === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleDescription)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, description, text => text);
  }).filter(element => {
    return hidden === false ? (0, _roleHelpers.isInaccessible)(element, {
      isSubtreeInaccessible: cachedIsSubtreeInaccessible
    }) === false : true;
  });
}
function makeRoleSelector(role, exact, customNormalizer) {
  var _roleElements$get;
  if (typeof role !== 'string') {
    // For non-string role parameters we can not determine the implicitRoleSelectors.
    return '*';
  }
  const explicitRoleSelector = exact && !customNormalizer ? `*[role~="${role}"]` : '*[role]';
  const roleRelations = (_roleElements$get = _ariaQuery.roleElements.get(role)) != null ? _roleElements$get : new Set();
  const implicitRoleSelectors = new Set(Array.from(roleRelations).map(({
    name
  }) => name));

  // Current transpilation config sometimes assumes `...` is always applied to arrays.
  // `...` is equivalent to `Array.prototype.concat` for arrays.
  // If you replace this code with `[explicitRoleSelector, ...implicitRoleSelectors]`, make sure every transpilation target retains the `...` in favor of `Array.prototype.concat`.
  return [explicitRoleSelector].concat(Array.from(implicitRoleSelectors)).join(',');
}
const getNameHint = name => {
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  return nameHint;
};
const getMultipleError = (c, role, {
  name
} = {}) => {
  return `Found multiple elements with the role "${role}"${getNameHint(name)}`;
};
const getMissingError = (container, role, {
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description
} = {}) => {
  if ((0, _allUtils.getConfig)()._disableExpensiveErrorDiagnostics) {
    return `Unable to find role="${role}"${getNameHint(name)}`;
  }
  let roles = '';
  Array.from(container.children).forEach(childElement => {
    roles += (0, _roleHelpers.prettyRoles)(childElement, {
      hidden,
      includeDescription: description !== undefined
    });
  });
  let roleMessage;
  if (roles.length === 0) {
    if (hidden === false) {
      roleMessage = 'There are no accessible roles. But there might be some inaccessible roles. ' + 'If you wish to access them, then set the `hidden` option to `true`. ' + 'Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole';
    } else {
      roleMessage = 'There are no available roles.';
    }
  } else {
    roleMessage = `
Here are the ${hidden === false ? 'accessible' : 'available'} roles:

  ${roles.replace(/\n/g, '\n  ').replace(/\n\s\s\n/g, '\n\n')}
`.trim();
  }
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  let descriptionHint = '';
  if (description === undefined) {
    descriptionHint = '';
  } else if (typeof description === 'string') {
    descriptionHint = ` and description "${description}"`;
  } else {
    descriptionHint = ` and description \`${description}\``;
  }
  return `
Unable to find an ${hidden === false ? 'accessible ' : ''}element with the role "${role}"${nameHint}${descriptionHint}

${roleMessage}`.trim();
};
const queryAllByRoleWithSuggestions = (0, _queryHelpers.wrapAllByQueryWithSuggestion)(queryAllByRole, queryAllByRole.name, 'queryAll');
exports.queryAllByRole = queryAllByRoleWithSuggestions;
const [queryByRole, getAllByRole, getByRole, findAllByRole, findByRole] = (0, _allUtils.buildQueries)(queryAllByRole, getMultipleError, getMissingError);
exports.findByRole = findByRole;
exports.findAllByRole = findAllByRole;
exports.getByRole = getByRole;
exports.getAllByRole = getAllByRole;
exports.queryByRole = queryByRole;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInF1ZXJ5QnlSb2xlIiwicXVlcnlBbGxCeVJvbGUiLCJnZXRCeVJvbGUiLCJnZXRBbGxCeVJvbGUiLCJmaW5kQnlSb2xlIiwiZmluZEFsbEJ5Um9sZSIsIl9kb21BY2Nlc3NpYmlsaXR5QXBpIiwicmVxdWlyZSIsIl9hcmlhUXVlcnkiLCJfcm9sZUhlbHBlcnMiLCJfcXVlcnlIZWxwZXJzIiwiX2hlbHBlcnMiLCJfYWxsVXRpbHMiLCJjb250YWluZXIiLCJyb2xlIiwiZXhhY3QiLCJjb2xsYXBzZVdoaXRlc3BhY2UiLCJoaWRkZW4iLCJnZXRDb25maWciLCJkZWZhdWx0SGlkZGVuIiwibmFtZSIsImRlc2NyaXB0aW9uIiwidHJpbSIsIm5vcm1hbGl6ZXIiLCJxdWVyeUZhbGxiYWNrcyIsInNlbGVjdGVkIiwiY2hlY2tlZCIsInByZXNzZWQiLCJjdXJyZW50IiwibGV2ZWwiLCJleHBhbmRlZCIsImNoZWNrQ29udGFpbmVyVHlwZSIsIm1hdGNoZXIiLCJtYXRjaGVzIiwiZnV6enlNYXRjaGVzIiwibWF0Y2hOb3JtYWxpemVyIiwibWFrZU5vcm1hbGl6ZXIiLCJ1bmRlZmluZWQiLCJfYWxsUm9sZXMkZ2V0Iiwicm9sZXMiLCJnZXQiLCJwcm9wcyIsIkVycm9yIiwiX2FsbFJvbGVzJGdldDIiLCJfYWxsUm9sZXMkZ2V0MyIsIl9hbGxSb2xlcyRnZXQ0IiwiX2FsbFJvbGVzJGdldDUiLCJzdWJ0cmVlSXNJbmFjY2Vzc2libGVDYWNoZSIsIldlYWtNYXAiLCJjYWNoZWRJc1N1YnRyZWVJbmFjY2Vzc2libGUiLCJlbGVtZW50IiwiaGFzIiwic2V0IiwiaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIm1ha2VSb2xlU2VsZWN0b3IiLCJmaWx0ZXIiLCJub2RlIiwiaXNSb2xlU3BlY2lmaWVkRXhwbGljaXRseSIsImhhc0F0dHJpYnV0ZSIsInJvbGVWYWx1ZSIsImdldEF0dHJpYnV0ZSIsInNwbGl0IiwiQm9vbGVhbiIsInNvbWUiLCJ0ZXh0IiwiZmlyc3RXb3JkIiwiaW1wbGljaXRSb2xlcyIsImdldEltcGxpY2l0QXJpYVJvbGVzIiwiaW1wbGljaXRSb2xlIiwiY29tcHV0ZUFyaWFTZWxlY3RlZCIsImNvbXB1dGVBcmlhQ2hlY2tlZCIsImNvbXB1dGVBcmlhUHJlc3NlZCIsImNvbXB1dGVBcmlhQ3VycmVudCIsImNvbXB1dGVBcmlhRXhwYW5kZWQiLCJjb21wdXRlSGVhZGluZ0xldmVsIiwiY29tcHV0ZUFjY2Vzc2libGVOYW1lIiwiY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMiLCJjb21wdXRlQWNjZXNzaWJsZURlc2NyaXB0aW9uIiwiaXNJbmFjY2Vzc2libGUiLCJjdXN0b21Ob3JtYWxpemVyIiwiX3JvbGVFbGVtZW50cyRnZXQiLCJleHBsaWNpdFJvbGVTZWxlY3RvciIsInJvbGVSZWxhdGlvbnMiLCJyb2xlRWxlbWVudHMiLCJTZXQiLCJpbXBsaWNpdFJvbGVTZWxlY3RvcnMiLCJtYXAiLCJjb25jYXQiLCJqb2luIiwiZ2V0TmFtZUhpbnQiLCJuYW1lSGludCIsImdldE11bHRpcGxlRXJyb3IiLCJjIiwiZ2V0TWlzc2luZ0Vycm9yIiwiX2Rpc2FibGVFeHBlbnNpdmVFcnJvckRpYWdub3N0aWNzIiwiY2hpbGRyZW4iLCJmb3JFYWNoIiwiY2hpbGRFbGVtZW50IiwicHJldHR5Um9sZXMiLCJpbmNsdWRlRGVzY3JpcHRpb24iLCJyb2xlTWVzc2FnZSIsImxlbmd0aCIsInJlcGxhY2UiLCJkZXNjcmlwdGlvbkhpbnQiLCJxdWVyeUFsbEJ5Um9sZVdpdGhTdWdnZXN0aW9ucyIsIndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24iLCJidWlsZFF1ZXJpZXMiXSwic291cmNlcyI6WyJyb2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5xdWVyeUJ5Um9sZSA9IGV4cG9ydHMucXVlcnlBbGxCeVJvbGUgPSBleHBvcnRzLmdldEJ5Um9sZSA9IGV4cG9ydHMuZ2V0QWxsQnlSb2xlID0gZXhwb3J0cy5maW5kQnlSb2xlID0gZXhwb3J0cy5maW5kQWxsQnlSb2xlID0gdm9pZCAwO1xudmFyIF9kb21BY2Nlc3NpYmlsaXR5QXBpID0gcmVxdWlyZShcImRvbS1hY2Nlc3NpYmlsaXR5LWFwaVwiKTtcbnZhciBfYXJpYVF1ZXJ5ID0gcmVxdWlyZShcImFyaWEtcXVlcnlcIik7XG52YXIgX3JvbGVIZWxwZXJzID0gcmVxdWlyZShcIi4uL3JvbGUtaGVscGVyc1wiKTtcbnZhciBfcXVlcnlIZWxwZXJzID0gcmVxdWlyZShcIi4uL3F1ZXJ5LWhlbHBlcnNcIik7XG52YXIgX2hlbHBlcnMgPSByZXF1aXJlKFwiLi4vaGVscGVyc1wiKTtcbnZhciBfYWxsVXRpbHMgPSByZXF1aXJlKFwiLi9hbGwtdXRpbHNcIik7XG5mdW5jdGlvbiBxdWVyeUFsbEJ5Um9sZShjb250YWluZXIsIHJvbGUsIHtcbiAgZXhhY3QgPSB0cnVlLFxuICBjb2xsYXBzZVdoaXRlc3BhY2UsXG4gIGhpZGRlbiA9ICgwLCBfYWxsVXRpbHMuZ2V0Q29uZmlnKSgpLmRlZmF1bHRIaWRkZW4sXG4gIG5hbWUsXG4gIGRlc2NyaXB0aW9uLFxuICB0cmltLFxuICBub3JtYWxpemVyLFxuICBxdWVyeUZhbGxiYWNrcyA9IGZhbHNlLFxuICBzZWxlY3RlZCxcbiAgY2hlY2tlZCxcbiAgcHJlc3NlZCxcbiAgY3VycmVudCxcbiAgbGV2ZWwsXG4gIGV4cGFuZGVkXG59ID0ge30pIHtcbiAgKDAsIF9oZWxwZXJzLmNoZWNrQ29udGFpbmVyVHlwZSkoY29udGFpbmVyKTtcbiAgY29uc3QgbWF0Y2hlciA9IGV4YWN0ID8gX2FsbFV0aWxzLm1hdGNoZXMgOiBfYWxsVXRpbHMuZnV6enlNYXRjaGVzO1xuICBjb25zdCBtYXRjaE5vcm1hbGl6ZXIgPSAoMCwgX2FsbFV0aWxzLm1ha2VOb3JtYWxpemVyKSh7XG4gICAgY29sbGFwc2VXaGl0ZXNwYWNlLFxuICAgIHRyaW0sXG4gICAgbm9ybWFsaXplclxuICB9KTtcbiAgaWYgKHNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDtcbiAgICAvLyBndWFyZCBhZ2FpbnN0IHVua25vd24gcm9sZXNcbiAgICBpZiAoKChfYWxsUm9sZXMkZ2V0ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0LnByb3BzWydhcmlhLXNlbGVjdGVkJ10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLXNlbGVjdGVkXCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAoY2hlY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQyO1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQyID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0Mi5wcm9wc1snYXJpYS1jaGVja2VkJ10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLWNoZWNrZWRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmIChwcmVzc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDM7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldDMgPSBfYXJpYVF1ZXJ5LnJvbGVzLmdldChyb2xlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hbGxSb2xlcyRnZXQzLnByb3BzWydhcmlhLXByZXNzZWQnXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFyaWEtcHJlc3NlZFwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0NDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIC8vIEFsbCBjdXJyZW50bHkgcmVsZWFzZWQgQVJJQSB2ZXJzaW9ucyBzdXBwb3J0IGBhcmlhLWN1cnJlbnRgIG9uIGFsbCByb2xlcy5cbiAgICAvLyBMZWF2aW5nIHRoaXMgZm9yIHN5bWV0cnkgYW5kIGZvcndhcmQgY29tcGF0aWJpbGl0eVxuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQ0ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0NC5wcm9wc1snYXJpYS1jdXJyZW50J10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLWN1cnJlbnRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmIChsZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1c2luZyBgbGV2ZWxgIG9wdGlvbiB3aXRoIGFueSByb2xlIG90aGVyIHRoYW4gYGhlYWRpbmdgXG4gICAgaWYgKHJvbGUgIT09ICdoZWFkaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSb2xlIFwiJHtyb2xlfVwiIGNhbm5vdCBoYXZlIFwibGV2ZWxcIiBwcm9wZXJ0eS5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKGV4cGFuZGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDU7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldDUgPSBfYXJpYVF1ZXJ5LnJvbGVzLmdldChyb2xlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hbGxSb2xlcyRnZXQ1LnByb3BzWydhcmlhLWV4cGFuZGVkJ10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLWV4cGFuZGVkXCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBjb25zdCBzdWJ0cmVlSXNJbmFjY2Vzc2libGVDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4gIGZ1bmN0aW9uIGNhY2hlZElzU3VidHJlZUluYWNjZXNzaWJsZShlbGVtZW50KSB7XG4gICAgaWYgKCFzdWJ0cmVlSXNJbmFjY2Vzc2libGVDYWNoZS5oYXMoZWxlbWVudCkpIHtcbiAgICAgIHN1YnRyZWVJc0luYWNjZXNzaWJsZUNhY2hlLnNldChlbGVtZW50LCAoMCwgX3JvbGVIZWxwZXJzLmlzU3VidHJlZUluYWNjZXNzaWJsZSkoZWxlbWVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gc3VidHJlZUlzSW5hY2Nlc3NpYmxlQ2FjaGUuZ2V0KGVsZW1lbnQpO1xuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxuICAvLyBPbmx5IHF1ZXJ5IGVsZW1lbnRzIHRoYXQgY2FuIGJlIG1hdGNoZWQgYnkgdGhlIGZvbGxvd2luZyBmaWx0ZXJzXG4gIG1ha2VSb2xlU2VsZWN0b3Iocm9sZSwgZXhhY3QsIG5vcm1hbGl6ZXIgPyBtYXRjaE5vcm1hbGl6ZXIgOiB1bmRlZmluZWQpKSkuZmlsdGVyKG5vZGUgPT4ge1xuICAgIGNvbnN0IGlzUm9sZVNwZWNpZmllZEV4cGxpY2l0bHkgPSBub2RlLmhhc0F0dHJpYnV0ZSgncm9sZScpO1xuICAgIGlmIChpc1JvbGVTcGVjaWZpZWRFeHBsaWNpdGx5KSB7XG4gICAgICBjb25zdCByb2xlVmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgaWYgKHF1ZXJ5RmFsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiByb2xlVmFsdWUuc3BsaXQoJyAnKS5maWx0ZXIoQm9vbGVhbikuc29tZSh0ZXh0ID0+IG1hdGNoZXIodGV4dCwgbm9kZSwgcm9sZSwgbWF0Y2hOb3JtYWxpemVyKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBhIGN1c3RvbSBub3JtYWxpemVyIGlzIHBhc3NlZCB0aGVuIGxldCBub3JtYWxpemVyIGhhbmRsZSB0aGUgcm9sZSB2YWx1ZVxuICAgICAgaWYgKG5vcm1hbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIocm9sZVZhbHVlLCBub2RlLCByb2xlLCBtYXRjaE5vcm1hbGl6ZXIpO1xuICAgICAgfVxuICAgICAgLy8gb3RoZXIgd2lzZSBvbmx5IHNlbmQgdGhlIGZpcnN0IHdvcmQgdG8gbWF0Y2hcbiAgICAgIGNvbnN0IFtmaXJzdFdvcmRdID0gcm9sZVZhbHVlLnNwbGl0KCcgJyk7XG4gICAgICByZXR1cm4gbWF0Y2hlcihmaXJzdFdvcmQsIG5vZGUsIHJvbGUsIG1hdGNoTm9ybWFsaXplcik7XG4gICAgfVxuICAgIGNvbnN0IGltcGxpY2l0Um9sZXMgPSAoMCwgX3JvbGVIZWxwZXJzLmdldEltcGxpY2l0QXJpYVJvbGVzKShub2RlKTtcbiAgICByZXR1cm4gaW1wbGljaXRSb2xlcy5zb21lKGltcGxpY2l0Um9sZSA9PiBtYXRjaGVyKGltcGxpY2l0Um9sZSwgbm9kZSwgcm9sZSwgbWF0Y2hOb3JtYWxpemVyKSk7XG4gIH0pLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICBpZiAoc2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHNlbGVjdGVkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhU2VsZWN0ZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY2hlY2tlZCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYUNoZWNrZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAocHJlc3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJlc3NlZCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYVByZXNzZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoY3VycmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY3VycmVudCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYUN1cnJlbnQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoZXhwYW5kZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV4cGFuZGVkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhRXhwYW5kZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAobGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGxldmVsID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVIZWFkaW5nTGV2ZWwpKGVsZW1lbnQpO1xuICAgIH1cbiAgICAvLyBkb24ndCBjYXJlIGlmIGFyaWEgYXR0cmlidXRlcyBhcmUgdW5zcGVjaWZpZWRcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIERvbid0IGNhcmVcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIF9hbGxVdGlscy5tYXRjaGVzKSgoMCwgX2RvbUFjY2Vzc2liaWxpdHlBcGkuY29tcHV0ZUFjY2Vzc2libGVOYW1lKShlbGVtZW50LCB7XG4gICAgICBjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50czogKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHNcbiAgICB9KSwgZWxlbWVudCwgbmFtZSwgdGV4dCA9PiB0ZXh0KTtcbiAgfSkuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgIGlmIChkZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBEb24ndCBjYXJlXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBfYWxsVXRpbHMubWF0Y2hlcykoKDAsIF9kb21BY2Nlc3NpYmlsaXR5QXBpLmNvbXB1dGVBY2Nlc3NpYmxlRGVzY3JpcHRpb24pKGVsZW1lbnQsIHtcbiAgICAgIGNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzOiAoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5jb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50c1xuICAgIH0pLCBlbGVtZW50LCBkZXNjcmlwdGlvbiwgdGV4dCA9PiB0ZXh0KTtcbiAgfSkuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgIHJldHVybiBoaWRkZW4gPT09IGZhbHNlID8gKDAsIF9yb2xlSGVscGVycy5pc0luYWNjZXNzaWJsZSkoZWxlbWVudCwge1xuICAgICAgaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlOiBjYWNoZWRJc1N1YnRyZWVJbmFjY2Vzc2libGVcbiAgICB9KSA9PT0gZmFsc2UgOiB0cnVlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIG1ha2VSb2xlU2VsZWN0b3Iocm9sZSwgZXhhY3QsIGN1c3RvbU5vcm1hbGl6ZXIpIHtcbiAgdmFyIF9yb2xlRWxlbWVudHMkZ2V0O1xuICBpZiAodHlwZW9mIHJvbGUgIT09ICdzdHJpbmcnKSB7XG4gICAgLy8gRm9yIG5vbi1zdHJpbmcgcm9sZSBwYXJhbWV0ZXJzIHdlIGNhbiBub3QgZGV0ZXJtaW5lIHRoZSBpbXBsaWNpdFJvbGVTZWxlY3RvcnMuXG4gICAgcmV0dXJuICcqJztcbiAgfVxuICBjb25zdCBleHBsaWNpdFJvbGVTZWxlY3RvciA9IGV4YWN0ICYmICFjdXN0b21Ob3JtYWxpemVyID8gYCpbcm9sZX49XCIke3JvbGV9XCJdYCA6ICcqW3JvbGVdJztcbiAgY29uc3Qgcm9sZVJlbGF0aW9ucyA9IChfcm9sZUVsZW1lbnRzJGdldCA9IF9hcmlhUXVlcnkucm9sZUVsZW1lbnRzLmdldChyb2xlKSkgIT0gbnVsbCA/IF9yb2xlRWxlbWVudHMkZ2V0IDogbmV3IFNldCgpO1xuICBjb25zdCBpbXBsaWNpdFJvbGVTZWxlY3RvcnMgPSBuZXcgU2V0KEFycmF5LmZyb20ocm9sZVJlbGF0aW9ucykubWFwKCh7XG4gICAgbmFtZVxuICB9KSA9PiBuYW1lKSk7XG5cbiAgLy8gQ3VycmVudCB0cmFuc3BpbGF0aW9uIGNvbmZpZyBzb21ldGltZXMgYXNzdW1lcyBgLi4uYCBpcyBhbHdheXMgYXBwbGllZCB0byBhcnJheXMuXG4gIC8vIGAuLi5gIGlzIGVxdWl2YWxlbnQgdG8gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGZvciBhcnJheXMuXG4gIC8vIElmIHlvdSByZXBsYWNlIHRoaXMgY29kZSB3aXRoIGBbZXhwbGljaXRSb2xlU2VsZWN0b3IsIC4uLmltcGxpY2l0Um9sZVNlbGVjdG9yc11gLCBtYWtlIHN1cmUgZXZlcnkgdHJhbnNwaWxhdGlvbiB0YXJnZXQgcmV0YWlucyB0aGUgYC4uLmAgaW4gZmF2b3Igb2YgYEFycmF5LnByb3RvdHlwZS5jb25jYXRgLlxuICByZXR1cm4gW2V4cGxpY2l0Um9sZVNlbGVjdG9yXS5jb25jYXQoQXJyYXkuZnJvbShpbXBsaWNpdFJvbGVTZWxlY3RvcnMpKS5qb2luKCcsJyk7XG59XG5jb25zdCBnZXROYW1lSGludCA9IG5hbWUgPT4ge1xuICBsZXQgbmFtZUhpbnQgPSAnJztcbiAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIG5hbWVIaW50ID0gJyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgbmFtZUhpbnQgPSBgIGFuZCBuYW1lIFwiJHtuYW1lfVwiYDtcbiAgfSBlbHNlIHtcbiAgICBuYW1lSGludCA9IGAgYW5kIG5hbWUgXFxgJHtuYW1lfVxcYGA7XG4gIH1cbiAgcmV0dXJuIG5hbWVIaW50O1xufTtcbmNvbnN0IGdldE11bHRpcGxlRXJyb3IgPSAoYywgcm9sZSwge1xuICBuYW1lXG59ID0ge30pID0+IHtcbiAgcmV0dXJuIGBGb3VuZCBtdWx0aXBsZSBlbGVtZW50cyB3aXRoIHRoZSByb2xlIFwiJHtyb2xlfVwiJHtnZXROYW1lSGludChuYW1lKX1gO1xufTtcbmNvbnN0IGdldE1pc3NpbmdFcnJvciA9IChjb250YWluZXIsIHJvbGUsIHtcbiAgaGlkZGVuID0gKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuZGVmYXVsdEhpZGRlbixcbiAgbmFtZSxcbiAgZGVzY3JpcHRpb25cbn0gPSB7fSkgPT4ge1xuICBpZiAoKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuX2Rpc2FibGVFeHBlbnNpdmVFcnJvckRpYWdub3N0aWNzKSB7XG4gICAgcmV0dXJuIGBVbmFibGUgdG8gZmluZCByb2xlPVwiJHtyb2xlfVwiJHtnZXROYW1lSGludChuYW1lKX1gO1xuICB9XG4gIGxldCByb2xlcyA9ICcnO1xuICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChjaGlsZEVsZW1lbnQgPT4ge1xuICAgIHJvbGVzICs9ICgwLCBfcm9sZUhlbHBlcnMucHJldHR5Um9sZXMpKGNoaWxkRWxlbWVudCwge1xuICAgICAgaGlkZGVuLFxuICAgICAgaW5jbHVkZURlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0pO1xuICBsZXQgcm9sZU1lc3NhZ2U7XG4gIGlmIChyb2xlcy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaGlkZGVuID09PSBmYWxzZSkge1xuICAgICAgcm9sZU1lc3NhZ2UgPSAnVGhlcmUgYXJlIG5vIGFjY2Vzc2libGUgcm9sZXMuIEJ1dCB0aGVyZSBtaWdodCBiZSBzb21lIGluYWNjZXNzaWJsZSByb2xlcy4gJyArICdJZiB5b3Ugd2lzaCB0byBhY2Nlc3MgdGhlbSwgdGhlbiBzZXQgdGhlIGBoaWRkZW5gIG9wdGlvbiB0byBgdHJ1ZWAuICcgKyAnTGVhcm4gbW9yZSBhYm91dCB0aGlzIGhlcmU6IGh0dHBzOi8vdGVzdGluZy1saWJyYXJ5LmNvbS9kb2NzL2RvbS10ZXN0aW5nLWxpYnJhcnkvYXBpLXF1ZXJpZXMjYnlyb2xlJztcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sZU1lc3NhZ2UgPSAnVGhlcmUgYXJlIG5vIGF2YWlsYWJsZSByb2xlcy4nO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByb2xlTWVzc2FnZSA9IGBcbkhlcmUgYXJlIHRoZSAke2hpZGRlbiA9PT0gZmFsc2UgPyAnYWNjZXNzaWJsZScgOiAnYXZhaWxhYmxlJ30gcm9sZXM6XG5cbiAgJHtyb2xlcy5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykucmVwbGFjZSgvXFxuXFxzXFxzXFxuL2csICdcXG5cXG4nKX1cbmAudHJpbSgpO1xuICB9XG4gIGxldCBuYW1lSGludCA9ICcnO1xuICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbmFtZUhpbnQgPSAnJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lSGludCA9IGAgYW5kIG5hbWUgXCIke25hbWV9XCJgO1xuICB9IGVsc2Uge1xuICAgIG5hbWVIaW50ID0gYCBhbmQgbmFtZSBcXGAke25hbWV9XFxgYDtcbiAgfVxuICBsZXQgZGVzY3JpcHRpb25IaW50ID0gJyc7XG4gIGlmIChkZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZGVzY3JpcHRpb25IaW50ID0gJyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgIGRlc2NyaXB0aW9uSGludCA9IGAgYW5kIGRlc2NyaXB0aW9uIFwiJHtkZXNjcmlwdGlvbn1cImA7XG4gIH0gZWxzZSB7XG4gICAgZGVzY3JpcHRpb25IaW50ID0gYCBhbmQgZGVzY3JpcHRpb24gXFxgJHtkZXNjcmlwdGlvbn1cXGBgO1xuICB9XG4gIHJldHVybiBgXG5VbmFibGUgdG8gZmluZCBhbiAke2hpZGRlbiA9PT0gZmFsc2UgPyAnYWNjZXNzaWJsZSAnIDogJyd9ZWxlbWVudCB3aXRoIHRoZSByb2xlIFwiJHtyb2xlfVwiJHtuYW1lSGludH0ke2Rlc2NyaXB0aW9uSGludH1cblxuJHtyb2xlTWVzc2FnZX1gLnRyaW0oKTtcbn07XG5jb25zdCBxdWVyeUFsbEJ5Um9sZVdpdGhTdWdnZXN0aW9ucyA9ICgwLCBfcXVlcnlIZWxwZXJzLndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24pKHF1ZXJ5QWxsQnlSb2xlLCBxdWVyeUFsbEJ5Um9sZS5uYW1lLCAncXVlcnlBbGwnKTtcbmV4cG9ydHMucXVlcnlBbGxCeVJvbGUgPSBxdWVyeUFsbEJ5Um9sZVdpdGhTdWdnZXN0aW9ucztcbmNvbnN0IFtxdWVyeUJ5Um9sZSwgZ2V0QWxsQnlSb2xlLCBnZXRCeVJvbGUsIGZpbmRBbGxCeVJvbGUsIGZpbmRCeVJvbGVdID0gKDAsIF9hbGxVdGlscy5idWlsZFF1ZXJpZXMpKHF1ZXJ5QWxsQnlSb2xlLCBnZXRNdWx0aXBsZUVycm9yLCBnZXRNaXNzaW5nRXJyb3IpO1xuZXhwb3J0cy5maW5kQnlSb2xlID0gZmluZEJ5Um9sZTtcbmV4cG9ydHMuZmluZEFsbEJ5Um9sZSA9IGZpbmRBbGxCeVJvbGU7XG5leHBvcnRzLmdldEJ5Um9sZSA9IGdldEJ5Um9sZTtcbmV4cG9ydHMuZ2V0QWxsQnlSb2xlID0gZ2V0QWxsQnlSb2xlO1xuZXhwb3J0cy5xdWVyeUJ5Um9sZSA9IHF1ZXJ5QnlSb2xlOyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLFdBQVcsR0FB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