1779eed9f489a8e96ce7e46bd6f42dff
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.codeFrameColumns = codeFrameColumns;
exports.default = _default;
var _highlight = require("@babel/highlight");
let deprecationWarningShown = false;
function getDefs(chalk) {
  return {
    gutter: chalk.grey,
    marker: chalk.red.bold,
    message: chalk.red.bold
  };
}
const NEWLINE = /\r\n|[\n\r\u2028\u2029]/;
function getMarkerLines(loc, source, opts) {
  const startLoc = Object.assign({
    column: 0,
    line: -1
  }, loc.start);
  const endLoc = Object.assign({}, startLoc, loc.end);
  const {
    linesAbove = 2,
    linesBelow = 3
  } = opts || {};
  const startLine = startLoc.line;
  const startColumn = startLoc.column;
  const endLine = endLoc.line;
  const endColumn = endLoc.column;
  let start = Math.max(startLine - (linesAbove + 1), 0);
  let end = Math.min(source.length, endLine + linesBelow);
  if (startLine === -1) {
    start = 0;
  }
  if (endLine === -1) {
    end = source.length;
  }
  const lineDiff = endLine - startLine;
  const markerLines = {};
  if (lineDiff) {
    for (let i = 0; i <= lineDiff; i++) {
      const lineNumber = i + startLine;
      if (!startColumn) {
        markerLines[lineNumber] = true;
      } else if (i === 0) {
        const sourceLength = source[lineNumber - 1].length;
        markerLines[lineNumber] = [startColumn, sourceLength - startColumn + 1];
      } else if (i === lineDiff) {
        markerLines[lineNumber] = [0, endColumn];
      } else {
        const sourceLength = source[lineNumber - i].length;
        markerLines[lineNumber] = [0, sourceLength];
      }
    }
  } else {
    if (startColumn === endColumn) {
      if (startColumn) {
        markerLines[startLine] = [startColumn, 0];
      } else {
        markerLines[startLine] = true;
      }
    } else {
      markerLines[startLine] = [startColumn, endColumn - startColumn];
    }
  }
  return {
    start,
    end,
    markerLines
  };
}
function codeFrameColumns(rawLines, loc, opts = {}) {
  const highlighted = (opts.highlightCode || opts.forceColor) && (0, _highlight.shouldHighlight)(opts);
  const chalk = (0, _highlight.getChalk)(opts);
  const defs = getDefs(chalk);
  const maybeHighlight = (chalkFn, string) => {
    return highlighted ? chalkFn(string) : string;
  };
  const lines = rawLines.split(NEWLINE);
  const {
    start,
    end,
    markerLines
  } = getMarkerLines(loc, lines, opts);
  const hasColumns = loc.start && typeof loc.start.column === "number";
  const numberMaxWidth = String(end).length;
  const highlightedLines = highlighted ? (0, _highlight.default)(rawLines, opts) : rawLines;
  let frame = highlightedLines.split(NEWLINE, end).slice(start, end).map((line, index) => {
    const number = start + 1 + index;
    const paddedNumber = ` ${number}`.slice(-numberMaxWidth);
    const gutter = ` ${paddedNumber} |`;
    const hasMarker = markerLines[number];
    const lastMarkerLine = !markerLines[number + 1];
    if (hasMarker) {
      let markerLine = "";
      if (Array.isArray(hasMarker)) {
        const markerSpacing = line.slice(0, Math.max(hasMarker[0] - 1, 0)).replace(/[^\t]/g, " ");
        const numberOfMarkers = hasMarker[1] || 1;
        markerLine = ["\n ", maybeHighlight(defs.gutter, gutter.replace(/\d/g, " ")), " ", markerSpacing, maybeHighlight(defs.marker, "^").repeat(numberOfMarkers)].join("");
        if (lastMarkerLine && opts.message) {
          markerLine += " " + maybeHighlight(defs.message, opts.message);
        }
      }
      return [maybeHighlight(defs.marker, ">"), maybeHighlight(defs.gutter, gutter), line.length > 0 ? ` ${line}` : "", markerLine].join("");
    } else {
      return ` ${maybeHighlight(defs.gutter, gutter)}${line.length > 0 ? ` ${line}` : ""}`;
    }
  }).join("\n");
  if (opts.message && !hasColumns) {
    frame = `${" ".repeat(numberMaxWidth + 1)}${opts.message}\n${frame}`;
  }
  if (highlighted) {
    return chalk.reset(frame);
  } else {
    return frame;
  }
}
function _default(rawLines, lineNumber, colNumber, opts = {}) {
  if (!deprecationWarningShown) {
    deprecationWarningShown = true;
    const message = "Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";
    if (process.emitWarning) {
      process.emitWarning(message, "DeprecationWarning");
    } else {
      const deprecationError = new Error(message);
      deprecationError.name = "DeprecationWarning";
      console.warn(new Error(message));
    }
  }
  colNumber = Math.max(colNumber, 0);
  const location = {
    start: {
      column: colNumber,
      line: lineNumber
    }
  };
  return codeFrameColumns(rawLines, location, opts);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaGlnaGxpZ2h0IiwicmVxdWlyZSIsImRlcHJlY2F0aW9uV2FybmluZ1Nob3duIiwiZ2V0RGVmcyIsImNoYWxrIiwiZ3V0dGVyIiwiZ3JleSIsIm1hcmtlciIsInJlZCIsImJvbGQiLCJtZXNzYWdlIiwiTkVXTElORSIsImdldE1hcmtlckxpbmVzIiwibG9jIiwic291cmNlIiwib3B0cyIsInN0YXJ0TG9jIiwiT2JqZWN0IiwiYXNzaWduIiwiY29sdW1uIiwibGluZSIsInN0YXJ0IiwiZW5kTG9jIiwiZW5kIiwibGluZXNBYm92ZSIsImxpbmVzQmVsb3ciLCJzdGFydExpbmUiLCJzdGFydENvbHVtbiIsImVuZExpbmUiLCJlbmRDb2x1bW4iLCJNYXRoIiwibWF4IiwibWluIiwibGVuZ3RoIiwibGluZURpZmYiLCJtYXJrZXJMaW5lcyIsImkiLCJsaW5lTnVtYmVyIiwic291cmNlTGVuZ3RoIiwiY29kZUZyYW1lQ29sdW1ucyIsInJhd0xpbmVzIiwiaGlnaGxpZ2h0ZWQiLCJoaWdobGlnaHRDb2RlIiwiZm9yY2VDb2xvciIsInNob3VsZEhpZ2hsaWdodCIsImdldENoYWxrIiwiZGVmcyIsIm1heWJlSGlnaGxpZ2h0IiwiY2hhbGtGbiIsInN0cmluZyIsImxpbmVzIiwic3BsaXQiLCJoYXNDb2x1bW5zIiwibnVtYmVyTWF4V2lkdGgiLCJTdHJpbmciLCJoaWdobGlnaHRlZExpbmVzIiwiZGVmYXVsdCIsImZyYW1lIiwic2xpY2UiLCJtYXAiLCJpbmRleCIsIm51bWJlciIsInBhZGRlZE51bWJlciIsImhhc01hcmtlciIsImxhc3RNYXJrZXJMaW5lIiwibWFya2VyTGluZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcmtlclNwYWNpbmciLCJyZXBsYWNlIiwibnVtYmVyT2ZNYXJrZXJzIiwicmVwZWF0Iiwiam9pbiIsInJlc2V0IiwiX2RlZmF1bHQiLCJjb2xOdW1iZXIiLCJwcm9jZXNzIiwiZW1pdFdhcm5pbmciLCJkZXByZWNhdGlvbkVycm9yIiwiRXJyb3IiLCJuYW1lIiwiY29uc29sZSIsIndhcm4iLCJsb2NhdGlvbiJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGlnaGxpZ2h0LCB7IHNob3VsZEhpZ2hsaWdodCwgZ2V0Q2hhbGsgfSBmcm9tIFwiQGJhYmVsL2hpZ2hsaWdodFwiO1xuXG50eXBlIENoYWxrID0gUmV0dXJuVHlwZTx0eXBlb2YgZ2V0Q2hhbGs+O1xuXG5sZXQgZGVwcmVjYXRpb25XYXJuaW5nU2hvd24gPSBmYWxzZTtcblxudHlwZSBMb2NhdGlvbiA9IHtcbiAgY29sdW1uOiBudW1iZXI7XG4gIGxpbmU6IG51bWJlcjtcbn07XG5cbnR5cGUgTm9kZUxvY2F0aW9uID0ge1xuICBlbmQ/OiBMb2NhdGlvbjtcbiAgc3RhcnQ6IExvY2F0aW9uO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgLyoqIFN5bnRheCBoaWdobGlnaHQgdGhlIGNvZGUgYXMgSmF2YVNjcmlwdCBmb3IgdGVybWluYWxzLiBkZWZhdWx0OiBmYWxzZSAqL1xuICBoaWdobGlnaHRDb2RlPzogYm9vbGVhbjtcbiAgLyoqICBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIHNob3cgYWJvdmUgdGhlIGVycm9yLiBkZWZhdWx0OiAyICovXG4gIGxpbmVzQWJvdmU/OiBudW1iZXI7XG4gIC8qKiAgVGhlIG51bWJlciBvZiBsaW5lcyB0byBzaG93IGJlbG93IHRoZSBlcnJvci4gZGVmYXVsdDogMyAqL1xuICBsaW5lc0JlbG93PzogbnVtYmVyO1xuICAvKipcbiAgICogRm9yY2libHkgc3ludGF4IGhpZ2hsaWdodCB0aGUgY29kZSBhcyBKYXZhU2NyaXB0IChmb3Igbm9uLXRlcm1pbmFscyk7XG4gICAqIG92ZXJyaWRlcyBoaWdobGlnaHRDb2RlLlxuICAgKiBkZWZhdWx0OiBmYWxzZVxuICAgKi9cbiAgZm9yY2VDb2xvcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBQYXNzIGluIGEgc3RyaW5nIHRvIGJlIGRpc3BsYXllZCBpbmxpbmUgKGlmIHBvc3NpYmxlKSBuZXh0IHRvIHRoZVxuICAgKiBoaWdobGlnaHRlZCBsb2NhdGlvbiBpbiB0aGUgY29kZS4gSWYgaXQgY2FuJ3QgYmUgcG9zaXRpb25lZCBpbmxpbmUsXG4gICAqIGl0IHdpbGwgYmUgcGxhY2VkIGFib3ZlIHRoZSBjb2RlIGZyYW1lLlxuICAgKiBkZWZhdWx0OiBub3RoaW5nXG4gICAqL1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIENoYWxrIHN0eWxlcyBmb3IgY29kZSBmcmFtZSB0b2tlbiB0eXBlcy5cbiAqL1xuZnVuY3Rpb24gZ2V0RGVmcyhjaGFsazogQ2hhbGspIHtcbiAgcmV0dXJuIHtcbiAgICBndXR0ZXI6IGNoYWxrLmdyZXksXG4gICAgbWFya2VyOiBjaGFsay5yZWQuYm9sZCxcbiAgICBtZXNzYWdlOiBjaGFsay5yZWQuYm9sZCxcbiAgfTtcbn1cblxuLyoqXG4gKiBSZWdFeHAgdG8gdGVzdCBmb3IgbmV3bGluZXMgaW4gdGVybWluYWwuXG4gKi9cblxuY29uc3QgTkVXTElORSA9IC9cXHJcXG58W1xcblxcclxcdTIwMjhcXHUyMDI5XS87XG5cbi8qKlxuICogRXh0cmFjdCB3aGF0IGxpbmVzIHNob3VsZCBiZSBtYXJrZWQgYW5kIGhpZ2hsaWdodGVkLlxuICovXG5cbnR5cGUgTWFya2VyTGluZXMgPSBSZWNvcmQ8bnVtYmVyLCB0cnVlIHwgW251bWJlciwgbnVtYmVyXT47XG5cbmZ1bmN0aW9uIGdldE1hcmtlckxpbmVzKFxuICBsb2M6IE5vZGVMb2NhdGlvbixcbiAgc291cmNlOiBBcnJheTxzdHJpbmc+LFxuICBvcHRzOiBPcHRpb25zLFxuKToge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbiAgbWFya2VyTGluZXM6IE1hcmtlckxpbmVzO1xufSB7XG4gIGNvbnN0IHN0YXJ0TG9jOiBMb2NhdGlvbiA9IHtcbiAgICBjb2x1bW46IDAsXG4gICAgbGluZTogLTEsXG4gICAgLi4ubG9jLnN0YXJ0LFxuICB9O1xuICBjb25zdCBlbmRMb2M6IExvY2F0aW9uID0ge1xuICAgIC4uLnN0YXJ0TG9jLFxuICAgIC4uLmxvYy5lbmQsXG4gIH07XG4gIGNvbnN0IHsgbGluZXNBYm92ZSA9IDIsIGxpbmVzQmVsb3cgPSAzIH0gPSBvcHRzIHx8IHt9O1xuICBjb25zdCBzdGFydExpbmUgPSBzdGFydExvYy5saW5lO1xuICBjb25zdCBzdGFydENvbHVtbiA9IHN0YXJ0TG9jLmNvbHVtbjtcbiAgY29uc3QgZW5kTGluZSA9IGVuZExvYy5saW5lO1xuICBjb25zdCBlbmRDb2x1bW4gPSBlbmRMb2MuY29sdW1uO1xuXG4gIGxldCBzdGFydCA9IE1hdGgubWF4KHN0YXJ0TGluZSAtIChsaW5lc0Fib3ZlICsgMSksIDApO1xuICBsZXQgZW5kID0gTWF0aC5taW4oc291cmNlLmxlbmd0aCwgZW5kTGluZSArIGxpbmVzQmVsb3cpO1xuXG4gIGlmIChzdGFydExpbmUgPT09IC0xKSB7XG4gICAgc3RhcnQgPSAwO1xuICB9XG5cbiAgaWYgKGVuZExpbmUgPT09IC0xKSB7XG4gICAgZW5kID0gc291cmNlLmxlbmd0aDtcbiAgfVxuXG4gIGNvbnN0IGxpbmVEaWZmID0gZW5kTGluZSAtIHN0YXJ0TGluZTtcbiAgY29uc3QgbWFya2VyTGluZXM6IE1hcmtlckxpbmVzID0ge307XG5cbiAgaWYgKGxpbmVEaWZmKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbGluZURpZmY7IGkrKykge1xuICAgICAgY29uc3QgbGluZU51bWJlciA9IGkgKyBzdGFydExpbmU7XG5cbiAgICAgIGlmICghc3RhcnRDb2x1bW4pIHtcbiAgICAgICAgbWFya2VyTGluZXNbbGluZU51bWJlcl0gPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZUxlbmd0aCA9IHNvdXJjZVtsaW5lTnVtYmVyIC0gMV0ubGVuZ3RoO1xuXG4gICAgICAgIG1hcmtlckxpbmVzW2xpbmVOdW1iZXJdID0gW3N0YXJ0Q29sdW1uLCBzb3VyY2VMZW5ndGggLSBzdGFydENvbHVtbiArIDFdO1xuICAgICAgfSBlbHNlIGlmIChpID09PSBsaW5lRGlmZikge1xuICAgICAgICBtYXJrZXJMaW5lc1tsaW5lTnVtYmVyXSA9IFswLCBlbmRDb2x1bW5dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc291cmNlTGVuZ3RoID0gc291cmNlW2xpbmVOdW1iZXIgLSBpXS5sZW5ndGg7XG5cbiAgICAgICAgbWFya2VyTGluZXNbbGluZU51bWJlcl0gPSBbMCwgc291cmNlTGVuZ3RoXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHN0YXJ0Q29sdW1uID09PSBlbmRDb2x1bW4pIHtcbiAgICAgIGlmIChzdGFydENvbHVtbikge1xuICAgICAgICBtYXJrZXJMaW5lc1tzdGFydExpbmVdID0gW3N0YXJ0Q29sdW1uLCAwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hcmtlckxpbmVzW3N0YXJ0TGluZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtYXJrZXJMaW5lc1tzdGFydExpbmVdID0gW3N0YXJ0Q29sdW1uLCBlbmRDb2x1bW4gLSBzdGFydENvbHVtbl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgc3RhcnQsIGVuZCwgbWFya2VyTGluZXMgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvZGVGcmFtZUNvbHVtbnMoXG4gIHJhd0xpbmVzOiBzdHJpbmcsXG4gIGxvYzogTm9kZUxvY2F0aW9uLFxuICBvcHRzOiBPcHRpb25zID0ge30sXG4pOiBzdHJpbmcge1xuICBjb25zdCBoaWdobGlnaHRlZCA9XG4gICAgKG9wdHMuaGlnaGxpZ2h0Q29kZSB8fCBvcHRzLmZvcmNlQ29sb3IpICYmIHNob3VsZEhpZ2hsaWdodChvcHRzKTtcbiAgY29uc3QgY2hhbGsgPSBnZXRDaGFsayhvcHRzKTtcbiAgY29uc3QgZGVmcyA9IGdldERlZnMoY2hhbGspO1xuICBjb25zdCBtYXliZUhpZ2hsaWdodCA9IChjaGFsa0ZuOiBDaGFsaywgc3RyaW5nOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gaGlnaGxpZ2h0ZWQgPyBjaGFsa0ZuKHN0cmluZykgOiBzdHJpbmc7XG4gIH07XG4gIGNvbnN0IGxpbmVzID0gcmF3TGluZXMuc3BsaXQoTkVXTElORSk7XG4gIGNvbnN0IHsgc3RhcnQsIGVuZCwgbWFya2VyTGluZXMgfSA9IGdldE1hcmtlckxpbmVzKGxvYywgbGluZXMsIG9wdHMpO1xuICBjb25zdCBoYXNDb2x1bW5zID0gbG9jLnN0YXJ0ICYmIHR5cGVvZiBsb2Muc3RhcnQuY29sdW1uID09PSBcIm51bWJlclwiO1xuXG4gIGNvbnN0IG51bWJlck1heFdpZHRoID0gU3RyaW5nKGVuZCkubGVuZ3RoO1xuXG4gIGNvbnN0IGhpZ2hsaWdodGVkTGluZXMgPSBoaWdobGlnaHRlZCA/IGhpZ2hsaWdodChyYXdMaW5lcywgb3B0cykgOiByYXdMaW5lcztcblxuICBsZXQgZnJhbWUgPSBoaWdobGlnaHRlZExpbmVzXG4gICAgLnNwbGl0KE5FV0xJTkUsIGVuZClcbiAgICAuc2xpY2Uoc3RhcnQsIGVuZClcbiAgICAubWFwKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgbnVtYmVyID0gc3RhcnQgKyAxICsgaW5kZXg7XG4gICAgICBjb25zdCBwYWRkZWROdW1iZXIgPSBgICR7bnVtYmVyfWAuc2xpY2UoLW51bWJlck1heFdpZHRoKTtcbiAgICAgIGNvbnN0IGd1dHRlciA9IGAgJHtwYWRkZWROdW1iZXJ9IHxgO1xuICAgICAgY29uc3QgaGFzTWFya2VyID0gbWFya2VyTGluZXNbbnVtYmVyXTtcbiAgICAgIGNvbnN0IGxhc3RNYXJrZXJMaW5lID0gIW1hcmtlckxpbmVzW251bWJlciArIDFdO1xuICAgICAgaWYgKGhhc01hcmtlcikge1xuICAgICAgICBsZXQgbWFya2VyTGluZSA9IFwiXCI7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGhhc01hcmtlcikpIHtcbiAgICAgICAgICBjb25zdCBtYXJrZXJTcGFjaW5nID0gbGluZVxuICAgICAgICAgICAgLnNsaWNlKDAsIE1hdGgubWF4KGhhc01hcmtlclswXSAtIDEsIDApKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1teXFx0XS9nLCBcIiBcIik7XG4gICAgICAgICAgY29uc3QgbnVtYmVyT2ZNYXJrZXJzID0gaGFzTWFya2VyWzFdIHx8IDE7XG5cbiAgICAgICAgICBtYXJrZXJMaW5lID0gW1xuICAgICAgICAgICAgXCJcXG4gXCIsXG4gICAgICAgICAgICBtYXliZUhpZ2hsaWdodChkZWZzLmd1dHRlciwgZ3V0dGVyLnJlcGxhY2UoL1xcZC9nLCBcIiBcIikpLFxuICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICBtYXJrZXJTcGFjaW5nLFxuICAgICAgICAgICAgbWF5YmVIaWdobGlnaHQoZGVmcy5tYXJrZXIsIFwiXlwiKS5yZXBlYXQobnVtYmVyT2ZNYXJrZXJzKSxcbiAgICAgICAgICBdLmpvaW4oXCJcIik7XG5cbiAgICAgICAgICBpZiAobGFzdE1hcmtlckxpbmUgJiYgb3B0cy5tZXNzYWdlKSB7XG4gICAgICAgICAgICBtYXJrZXJMaW5lICs9IFwiIFwiICsgbWF5YmVIaWdobGlnaHQoZGVmcy5tZXNzYWdlLCBvcHRzLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIG1heWJlSGlnaGxpZ2h0KGRlZnMubWFya2VyLCBcIj5cIiksXG4gICAgICAgICAgbWF5YmVIaWdobGlnaHQoZGVmcy5ndXR0ZXIsIGd1dHRlciksXG4gICAgICAgICAgbGluZS5sZW5ndGggPiAwID8gYCAke2xpbmV9YCA6IFwiXCIsXG4gICAgICAgICAgbWFya2VyTGluZSxcbiAgICAgICAgXS5qb2luKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGAgJHttYXliZUhpZ2hsaWdodChkZWZzLmd1dHRlciwgZ3V0dGVyKX0ke1xuICAgICAgICAgIGxpbmUubGVuZ3RoID4gMCA/IGAgJHtsaW5lfWAgOiBcIlwiXG4gICAgICAgIH1gO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmpvaW4oXCJcXG5cIik7XG5cbiAgaWYgKG9wdHMubWVzc2FnZSAmJiAhaGFzQ29sdW1ucykge1xuICAgIGZyYW1lID0gYCR7XCIgXCIucmVwZWF0KG51bWJlck1heFdpZHRoICsgMSl9JHtvcHRzLm1lc3NhZ2V9XFxuJHtmcmFtZX1gO1xuICB9XG5cbiAgaWYgKGhpZ2hsaWdodGVkKSB7XG4gICAgcmV0dXJuIGNoYWxrLnJlc2V0KGZyYW1lKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnJhbWU7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjb2RlIGZyYW1lLCBhZGRpbmcgbGluZSBudW1iZXJzLCBjb2RlIGhpZ2hsaWdodGluZywgYW5kIHBvaW50aW5nIHRvIGEgZ2l2ZW4gcG9zaXRpb24uXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKFxuICByYXdMaW5lczogc3RyaW5nLFxuICBsaW5lTnVtYmVyOiBudW1iZXIsXG4gIGNvbE51bWJlcj86IG51bWJlciB8IG51bGwsXG4gIG9wdHM6IE9wdGlvbnMgPSB7fSxcbik6IHN0cmluZyB7XG4gIGlmICghZGVwcmVjYXRpb25XYXJuaW5nU2hvd24pIHtcbiAgICBkZXByZWNhdGlvbldhcm5pbmdTaG93biA9IHRydWU7XG5cbiAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgIFwiUGFzc2luZyBsaW5lTnVtYmVyIGFuZCBjb2xOdW1iZXIgaXMgZGVwcmVjYXRlZCB0byBAYmFiZWwvY29kZS1mcmFtZS4gUGxlYXNlIHVzZSBgY29kZUZyYW1lQ29sdW1uc2AuXCI7XG5cbiAgICBpZiAocHJvY2Vzcy5lbWl0V2FybmluZykge1xuICAgICAgLy8gQSBzdHJpbmcgaXMgZGlyZWN0bHkgc3VwcGxpZWQgdG8gZW1pdFdhcm5pbmcsIGJlY2F1c2Ugd2hlbiBzdXBwbHlpbmcgYW5cbiAgICAgIC8vIEVycm9yIG9iamVjdCBub2RlIHRocm93cyBpbiB0aGUgdGVzdHMgYmVjYXVzZSBvZiBkaWZmZXJlbnQgY29udGV4dHNcbiAgICAgIHByb2Nlc3MuZW1pdFdhcm5pbmcobWVzc2FnZSwgXCJEZXByZWNhdGlvbldhcm5pbmdcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRlcHJlY2F0aW9uRXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICBkZXByZWNhdGlvbkVycm9yLm5hbWUgPSBcIkRlcHJlY2F0aW9uV2FybmluZ1wiO1xuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gICAgfVxuICB9XG5cbiAgY29sTnVtYmVyID0gTWF0aC5tYXgoY29sTnVtYmVyLCAwKTtcblxuICBjb25zdCBsb2NhdGlvbjogTm9kZUxvY2F0aW9uID0ge1xuICAgIHN0YXJ0OiB7IGNvbHVtbjogY29sTnVtYmVyLCBsaW5lOiBsaW5lTnVtYmVyIH0sXG4gIH07XG5cbiAgcmV0dXJuIGNvZGVGcmFtZUNvbHVtbnMocmF3TGluZXMsIGxvY2F0aW9uLCBvcHRzKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUlBLElBQUlDLHVCQUF1QixHQUFHLEtBQUs7QUFxQ25DLFNBQVNDLE9BQU9BLENBQUNDLEtBQVksRUFBRTtFQUM3QixPQUFPO0lBQ0xDLE1BQU0sRUFBRUQsS0FBSyxDQUFDRSxJQUFJO0lBQ2xCQyxNQUFNLEVBQUVILEtBQUssQ0FBQ0ksR0FBRyxDQUFDQyxJQUFJO0lBQ3RCQyxPQUFPLEVBQUVOLEtBQUssQ0FBQ0ksR0FBRyxDQUFDQztFQUNyQixDQUFDO0FBQ0g7QUFNQSxNQUFNRSxPQUFPLEdBQUcseUJBQXlCO0FBUXpDLFNBQVNDLGNBQWNBLENBQ3JCQyxHQUFpQixFQUNqQkMsTUFBcUIsRUFDckJDLElBQWEsRUFLYjtFQUNBLE1BQU1DLFFBQWtCLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQTtJQUN0QkMsTUFBTSxFQUFFLENBQUM7SUFDVEMsSUFBSSxF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