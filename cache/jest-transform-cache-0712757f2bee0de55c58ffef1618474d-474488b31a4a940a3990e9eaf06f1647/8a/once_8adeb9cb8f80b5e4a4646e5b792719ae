f0f62ec2dd8b5ce94c5f7cf5041de596
/* istanbul ignore next */
"use strict";

var wrappy = require('wrappy');
module.exports = wrappy(once);
module.exports.strict = wrappy(onceStrict);
once.proto = once(function () {
  Object.defineProperty(Function.prototype, 'once', {
    value: function () {
      return once(this);
    },
    configurable: true
  });
  Object.defineProperty(Function.prototype, 'onceStrict', {
    value: function () {
      return onceStrict(this);
    },
    configurable: true
  });
});
function once(fn) {
  var f = function () {
    if (f.called) return f.value;
    f.called = true;
    return f.value = fn.apply(this, arguments);
  };
  f.called = false;
  return f;
}
function onceStrict(fn) {
  var f = function () {
    if (f.called) throw new Error(f.onceError);
    f.called = true;
    return f.value = fn.apply(this, arguments);
  };
  var name = fn.name || 'Function wrapped with `once`';
  f.onceError = name + " shouldn't be called more than once";
  f.called = false;
  return f;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cmFwcHkiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9uY2UiLCJzdHJpY3QiLCJvbmNlU3RyaWN0IiwicHJvdG8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJmbiIsImYiLCJjYWxsZWQiLCJhcHBseSIsImFyZ3VtZW50cyIsIkVycm9yIiwib25jZUVycm9yIiwibmFtZSJdLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHdyYXBweSA9IHJlcXVpcmUoJ3dyYXBweScpXG5tb2R1bGUuZXhwb3J0cyA9IHdyYXBweShvbmNlKVxubW9kdWxlLmV4cG9ydHMuc3RyaWN0ID0gd3JhcHB5KG9uY2VTdHJpY3QpXG5cbm9uY2UucHJvdG8gPSBvbmNlKGZ1bmN0aW9uICgpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgJ29uY2UnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBvbmNlKHRoaXMpXG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSlcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCAnb25jZVN0cmljdCcsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG9uY2VTdHJpY3QodGhpcylcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KVxufSlcblxuZnVuY3Rpb24gb25jZSAoZm4pIHtcbiAgdmFyIGYgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGYuY2FsbGVkKSByZXR1cm4gZi52YWx1ZVxuICAgIGYuY2FsbGVkID0gdHJ1ZVxuICAgIHJldHVybiBmLnZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG4gIGYuY2FsbGVkID0gZmFsc2VcbiAgcmV0dXJuIGZcbn1cblxuZnVuY3Rpb24gb25jZVN0cmljdCAoZm4pIHtcbiAgdmFyIGYgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGYuY2FsbGVkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGYub25jZUVycm9yKVxuICAgIGYuY2FsbGVkID0gdHJ1ZVxuICAgIHJldHVybiBmLnZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG4gIHZhciBuYW1lID0gZm4ubmFtZSB8fCAnRnVuY3Rpb24gd3JhcHBlZCB3aXRoIGBvbmNlYCdcbiAgZi5vbmNlRXJyb3IgPSBuYW1lICsgXCIgc2hvdWxkbid0IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZVwiXG4gIGYuY2FsbGVkID0gZmFsc2VcbiAgcmV0dXJuIGZcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsSUFBSUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQzlCQyxNQUFNLENBQUNDLE9BQU8sR0FBR0gsTUFBTSxDQUFDSSxJQUFJLENBQUM7QUFDN0JGLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDRSxNQUFNLEdBQUdMLE1BQU0sQ0FBQ00sVUFBVSxDQUFDO0FBRTFDRixJQUFJLENBQUNHLEtBQUssR0FBR0gsSUFBSSxDQUFDLFlBQVk7RUFDNUJJLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxRQUFRLENBQUNDLFNBQVMsRUFBRSxNQUFNLEVBQUU7SUFDaERDLEtBQUssRUFBRSxTQUFBQSxDQUFBLEVBQVk7TUFDakIsT0FBT1IsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuQixDQUFDO0lBQ0RTLFlBQVksRUFBRTtFQUNoQixDQUFDLENBQUM7RUFFRkwsTUFBTSxDQUFDQyxjQUFjLENBQUNDLFFBQVEsQ0FBQ0MsU0FBUyxFQUFFLFlBQVksRUFBRTtJQUN0REMsS0FBSyxFQUFFLFNBQUFBLENBQUEsRUFBWTtNQUNqQixPQUFPTixVQUFVLENBQUMsSUFBSSxDQUFDO0lBQ3pCLENBQUM7SUFDRE8sWUFBWSxFQUFFO0VBQ2hCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLFNBQVNULElBQUlBLENBQUVVLEVBQUUsRUFBRTtFQUNqQixJQUFJQyxDQUFDLEdBQUcsU0FBQUEsQ0FBQSxFQUFZO0lBQ2xCLElBQUlBLENBQUMsQ0FBQ0MsTUFBTSxFQUFFLE9BQU9ELENBQUMsQ0FBQ0gsS0FBSztJQUM1QkcsQ0FBQyxDQUFDQyxNQUFNLEdBQUcsSUFBSTtJQUNmLE9BQU9ELENBQUMsQ0FBQ0gsS0FBSyxHQUFHRSxFQUFFLENBQUNHLEtBQUssQ0FBQyxJQUFJLEVBQUVDLFNBQVMsQ0FBQztFQUM1QyxDQUFDO0VBQ0RILENBQUMsQ0FBQ0MsTUFBTSxHQUFHLEtBQUs7RUFDaEIsT0FBT0QsQ0FBQztBQUNWO0FBRUEsU0FBU1QsVUFBVUEsQ0FBRVEsRUFBRSxFQUFFO0VBQ3ZCLElBQUlDLENBQUMsR0FBRyxTQUFBQSxDQUFBLEVBQVk7SUFDbEIsSUFBSUEsQ0FBQyxDQUFDQyxNQUFNLEVBQ1YsTUFBTSxJQUFJRyxLQUFLLENBQUNKLENBQUMsQ0FBQ0ssU0FBUyxDQUFDO0lBQzlCTCxDQUFDLENBQUNDLE1BQU0sR0FBRyxJQUFJO0lBQ2YsT0FBT0QsQ0FBQyxDQUFDSCxLQUFLLEdBQUdFLEVBQUUsQ0FBQ0csS0FBSyxDQUFDLElBQUksRUFBRUMsU0FBUyxDQUFDO0VBQzVDLENBQUM7RUFDRCxJQUFJRyxJQUFJLEdBQUdQLEVBQUUsQ0FBQ08sSUFBSSxJQUFJLDhCQUE4QjtFQUNwRE4sQ0FBQyxDQUFDSyxTQUFTLEdBQUdDLElBQUksR0FBRyxxQ0FBcUM7RUFDMUROLENBQUMsQ0FBQ0MsTUFBTSxHQUFHLEtBQUs7RUFDaEIsT0FBT0QsQ0FBQztBQUNWIn0=